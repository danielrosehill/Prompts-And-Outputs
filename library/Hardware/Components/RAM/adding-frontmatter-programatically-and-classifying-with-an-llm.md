---
title: "Adding frontmatter programatically and classifying with an LLM"
---
![GPT-4o](https://img.shields.io/badge/GPT--4o-3333FF?style=for-the-badge&logo=openai&logoColor=white)



*Note: this repository consists of the outputs of large language models (LLMs). In many cases, these are unedited or minimally edited. The information provided is for demonstrative purposes only and is intended to highlight constraints and capabilities in LLM applications and prompt engineering strategies.*


# Prompt

So the best way to add the category tags is by adding YAML frontmatter. Can this process be automated in conjunction with an LLM? By which I mean - the frontmatter is automatically added to the documents by an LLM which intelligently classifies it as it does so?

# Output

Yes, you can definitely automate the process of adding YAML frontmatter using a combination of a **large language model (LLM)** and some scripts. Here's how you could approach it:

### **Process Outline:**

1. **Use an LLM for Intelligent Classification:**
   - Leverage an LLM (like GPT-4) to read and analyze the content of each markdown document.
   - Based on the analysis, the LLM can classify the document into categories (e.g., Shopping Recommendations, Technical Reference, How-To Guides, Stack Research).
   - The LLM can then generate relevant **YAML frontmatter** (including category, tags, and metadata) based on its classification.

2. **Automate the YAML Frontmatter Injection:**
   - Once the classification and metadata are generated by the LLM, you can use a script (in Python, for example) to inject this YAML frontmatter into each markdown file.
   - This process can be repeated across all 1,500+ documents in your folder.

### **Steps for Automation:**

#### **1. LLM for Document Classification**
   - **Tool:** GPT-4 (or any other LLM with text classification capabilities).
   - **Method:**
     - Write a prompt to the LLM that extracts relevant information from the document and classifies it.
     - The prompt could be something like: 
       ```markdown
       Classify the following markdown document into one of these categories: Shopping Recommendations, Technical Reference, How-To Guides, Stack Research. Also, suggest relevant tags based on the content.
       ```
       This could also ask the LLM to create the YAML frontmatter directly, like:
       ```yaml
       ---
       category: "Technical Reference"
       tags: ["Linux", "HowTo", "Bash Scripting"]
       created: "2024-10-06"
       ---
       ```

#### **2. Automate the Process with a Python Script**
   - **Script Functionality:**
     - The script reads each markdown file.
     - Sends the content to the LLM for classification and metadata generation (using the OpenAI API, for example).
     - Takes the output YAML frontmatter from the LLM.
     - Injects it into the document (at the top, as frontmatter).

   - **Basic Python Script Example:**
     ```python
     import openai
     import os

     # Set your OpenAI API key
     openai.api_key = 'your-api-key'

     # Function to send a document to GPT for classification and frontmatter generation
     def generate_frontmatter(document_text):
         prompt = f"Classify the following document and generate YAML frontmatter:\n\n{document_text}"
         response = openai.Completion.create(
             model="gpt-4",
             prompt=prompt,
             max_tokens=150
         )
         return response.choices[0].text

     # Function to add the generated YAML frontmatter to the document
     def add_frontmatter_to_document(document_path, frontmatter):
         with open(document_path, 'r+') as file:
             content = file.read()
             file.seek(0, 0)
             file.write(frontmatter + "\n" + content)

     # Loop through all markdown files in the folder
     folder_path = "/path/to/your/markdown/folder"
     for filename in os.listdir(folder_path):
         if filename.endswith(".md"):
             file_path = os.path.join(folder_path, filename)
             with open(file_path, 'r') as file:
                 document_text = file.read()

             # Generate YAML frontmatter using GPT-4
             frontmatter = generate_frontmatter(document_text)

             # Add the frontmatter to the markdown file
             add_frontmatter_to_document(file_path, frontmatter)

             print(f"Processed {filename}")
     ```

#### **3. Test on a Small Set of Documents**
   - Start with a small batch of markdown documents to verify that the LLM is accurately classifying and generating the desired YAML frontmatter.
   - Ensure the frontmatter formatting works in Obsidian after the script has modified the files.

#### **4. Scale Across the Full Vault**
   - Once youâ€™re satisfied with the accuracy, run the script on the entire folder.
   - The LLM will process each document, generate the YAML metadata, and inject it into the respective markdown files.

### **Benefits of This Approach:**
   - **Time-saving:** The LLM can quickly analyze and categorize documents much faster than manual sorting.
   - **Consistent Tagging:** The process is more uniform, avoiding human inconsistency.
   - **Scalable:** You can process thousands of documents effortlessly.
   - **Intelligent Metadata Generation:** The LLM can extract more nuanced metadata (e.g., keywords, themes) beyond just categorizing documents.

### **Potential Next Steps:**
   - **Fine-tune the classification prompt:** Experiment with the LLM's outputs to make sure it classifies the content according to your exact needs.
   - **Refine metadata:** You could ask the LLM to include additional useful metadata, such as a summary, key points, or even relationships with other documents.
   - **Automated regular updates:** Set up periodic runs of the script to automatically classify and add metadata to any new documents added to the vault.

This setup ensures your system can **grow dynamically**, allowing the vault to handle large-scale organization seamlessly. Would you like assistance in implementing any of these steps?